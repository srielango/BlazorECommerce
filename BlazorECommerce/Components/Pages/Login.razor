@page "/login"
@inject UserService UserService
@inject NavigationManager Navigation
@rendermode InteractiveServer

<h3>Login</h3>

<MudPaper Class="pa-4 max-w-sm mx-auto">
    <MudTextField @bind-Value="_username" Label="Username" Required="true" Margin="Margin.Dense" />"
    <MudTextField @bind-Value="_password" Label="Password" Type="InputType.Password" Required="true" Margin="Margin.Dense" />
    <MudButton Variant="Variant.Filled" Color="Color.Primary" FullWidth="true" OnClick="HandleLogin">Login</MudButton>
    <MudText Color="Color.Error" Class="mt-2">@_errorMessage</MudText>
</MudPaper>

@code {
    private string _username = string.Empty;
    private string _password = string.Empty;
    private string _errorMessage = string.Empty;

    private void HandleLogin()
    {
        _errorMessage = string.Empty;

        if (UserService.Login(_username, _password))
        {
            Navigation.NavigateTo("/"); // Redirect to home page on successful login
        }
        else
        {
            _errorMessage = "Login failed. Please try again.";
        }
    }
}
